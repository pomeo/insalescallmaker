{"version":3,"sources":["components/nestable.js"],"names":["addon","component","window","UIkit","define","amd","UI","draggingElement","hasTouch","html","$html","touchedlists","$win","hasPointerEvents","el","document","createElement","docEl","documentElement","style","pointerEvents","appendChild","supports","getComputedStyle","removeChild","eStart","eMove","eEnd","eCancel","defaults","prefix","listNodeName","itemNodeName","listBaseClass","listClass","listitemClass","itemClass","dragClass","movingClass","handleClass","collapsedClass","placeClass","noDragClass","emptyClass","group","maxDepth","threshold","boot","on","top","offset","scrollTop","Math","ceil","height","innerHeight","ready","context","$","each","ele","this","data","nestable","Utils","options","attr","init","$this","Object","keys","forEach","key","String","indexOf","replace","tplempty","find","addClass","end","element","children","length","append","Date","getTime","random","reset","placeEl","setParent","e","dragEl","button","preventDefault","target","currentTarget","action","item","closest","collapseItem","expandItem","toggleItem","onStartEvent","handle","hasClass","touches","dragStart","trigger","onMoveEvent","dragMove","onEndEvent","dragStop","addEventListener","serialize","depth","list","step","level","array","items","li","extend","sub","push","parent","index","parent_id","order","idProperty","mouse","offsetX","offsetY","startX","startY","lastX","lastY","nowX","nowY","distX","distY","dirAx","dirX","dirY","lastDirX","lastDirY","distAxX","distAxY","moving","dragRootEl","dragDepth","hasNewRoot","pointEl","i","removeClass","lists","expandAll","collapseAll","unsetParent","remove","dragItem","css","pageX","left","pageY","width","tmpDragOnSiblings","previousSibling","nextSibling","after","parentNode","appendTo","$body","parents","first","replaceWith","prev","next","opt","newAx","abs","last","isEmpty","visibility","elementFromPoint","body","scrollLeft","pageYOffset","nestableitem","pointElRoot","tmpRoot","isNewRoot","$newRoot","before"],"mappings":"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","file":"components/nestable.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n/*\n * Based on Nestable jQuery Plugin - Copyright (c) 2012 David Bushell - http://dbushell.com/\n */\n (function(addon) {\n\n     var component;\n\n     if (window.UIkit) {\n         component = addon(UIkit);\n     }\n\n     if (typeof define == \"function\" && define.amd) {\n         define(\"uikit-nestable\", [\"uikit\"], function(){\n             return component || addon(UIkit);\n         });\n     }\n\n })(function(UI) {\n\n    \"use strict\";\n\n    var hasTouch     = 'ontouchstart' in window,\n        html         = UI.$html,\n        touchedlists = [],\n        $win         = UI.$win,\n        draggingElement;\n\n    /**\n     * Detect CSS pointer-events property\n     * events are normally disabled on the dragging element to avoid conflicts\n     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js\n     */\n    var hasPointerEvents = (function() {\n\n        var el = document.createElement('div'), docEl = document.documentElement;\n\n        if (!('pointerEvents' in el.style)) {\n            return false;\n        }\n\n        el.style.pointerEvents = 'auto';\n        el.style.pointerEvents = 'x';\n\n        docEl.appendChild(el);\n\n        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';\n\n        docEl.removeChild(el);\n\n        return !!supports;\n    })();\n\n    var eStart  = hasTouch ? 'touchstart'  : 'mousedown',\n        eMove   = hasTouch ? 'touchmove'   : 'mousemove',\n        eEnd    = hasTouch ? 'touchend'    : 'mouseup',\n        eCancel = hasTouch ? 'touchcancel' : 'mouseup';\n\n\n    UI.component('nestable', {\n\n        defaults: {\n            prefix          : 'uk-',\n            listNodeName    : 'ul',\n            itemNodeName    : 'li',\n            listBaseClass   : '{prefix}nestable',\n            listClass       : '{prefix}nestable-list',\n            listitemClass   : '{prefix}nestable-list-item',\n            itemClass       : '{prefix}nestable-item',\n            dragClass       : '{prefix}nestable-list-dragged',\n            movingClass     : '{prefix}nestable-moving',\n            handleClass     : '{prefix}nestable-handle',\n            collapsedClass  : '{prefix}collapsed',\n            placeClass      : '{prefix}nestable-placeholder',\n            noDragClass     : '{prefix}nestable-nodrag',\n            emptyClass      : '{prefix}nestable-empty',\n            group           : 0,\n            maxDepth        : 10,\n            threshold       : 20\n        },\n\n        boot: function() {\n\n            // adjust document scrolling\n            UI.$html.on('mousemove touchmove', function(e) {\n\n                if (draggingElement) {\n\n\n                    var top = draggingElement.offset().top;\n\n                    if (top < UI.$win.scrollTop()) {\n                        UI.$win.scrollTop(UI.$win.scrollTop() - Math.ceil(draggingElement.height()/2));\n                    } else if ( (top + draggingElement.height()) > (window.innerHeight + UI.$win.scrollTop()) ) {\n                        UI.$win.scrollTop(UI.$win.scrollTop() + Math.ceil(draggingElement.height()/2));\n                    }\n                }\n            });\n\n            // init code\n            UI.ready(function(context) {\n\n                UI.$(\"[data-uk-nestable]\", context).each(function(){\n\n                    var ele = UI.$(this);\n\n                    if(!ele.data(\"nestable\")) {\n                        var plugin = UI.nestable(ele, UI.Utils.options(ele.attr(\"data-uk-nestable\")));\n                    }\n                });\n            });\n        },\n\n        init: function() {\n\n            var $this = this;\n\n            Object.keys(this.options).forEach(function(key){\n\n                if(String($this.options[key]).indexOf('{prefix}')!=-1) {\n                    $this.options[key] = $this.options[key].replace('{prefix}', $this.options.prefix);\n                }\n            });\n\n            this.tplempty = '<div class=\"' + this.options.emptyClass + '\"/>';\n\n            this.find(\">\"+this.options.itemNodeName).addClass(this.options.listitemClass)\n                .end()\n                .find(\"ul:not(.ignore-list)\").addClass(this.options.listClass)\n                .find(\">li\").addClass(this.options.listitemClass);\n\n            if (!this.element.children(this.options.itemNodeName).length) {\n                this.element.append(this.tplempty);\n            }\n\n            this.element.data(\"nestable-id\", \"ID\"+(new Date().getTime())+\"RAND\"+(Math.ceil(Math.random() *100000)));\n            this.reset();\n            this.element.data('nestable-group', this.options.group);\n            this.placeEl = UI.$('<div class=\"' + this.options.placeClass + '\"/>');\n\n            this.find(this.options.itemNodeName).each(function() {\n                $this.setParent(UI.$(this));\n            });\n\n            this.on('click', '[data-nestable-action]', function(e) {\n\n                if ($this.dragEl || (!hasTouch && e.button !== 0)) {\n                    return;\n                }\n\n                e.preventDefault();\n\n                var target = UI.$(e.currentTarget),\n                    action = target.data('nestableAction'),\n                    item   = target.closest($this.options.itemNodeName);\n                if (action === 'collapse') {\n                    $this.collapseItem(item);\n                }\n                if (action === 'expand') {\n                    $this.expandItem(item);\n                }\n                if (action === 'toggle') {\n                    $this.toggleItem(item);\n                }\n            });\n\n            var onStartEvent = function(e) {\n\n                var handle = UI.$(e.target);\n\n                if (!handle.hasClass($this.options.handleClass)) {\n                    if (handle.closest('.' + $this.options.noDragClass).length) {\n                        return;\n                    }\n                    handle = handle.closest('.' + $this.options.handleClass);\n                }\n                if (!handle.length || $this.dragEl || (!hasTouch && e.button !== 0) || (hasTouch && e.touches.length !== 1)) {\n                    return;\n                }\n                e.preventDefault();\n                $this.dragStart(hasTouch ? e.touches[0] : e);\n                $this.trigger('start.uk.nestable', [$this]);\n            };\n\n            var onMoveEvent = function(e) {\n                if ($this.dragEl) {\n                    e.preventDefault();\n                    $this.dragMove(hasTouch ? e.touches[0] : e);\n                    $this.trigger('move.uk.nestable', [$this]);\n                }\n            };\n\n            var onEndEvent = function(e) {\n                if ($this.dragEl) {\n                    e.preventDefault();\n                    $this.dragStop(hasTouch ? e.touches[0] : e);\n                }\n\n                draggingElement = false;\n            };\n\n            if (hasTouch) {\n                this.element[0].addEventListener(eStart, onStartEvent, false);\n                window.addEventListener(eMove, onMoveEvent, false);\n                window.addEventListener(eEnd, onEndEvent, false);\n                window.addEventListener(eCancel, onEndEvent, false);\n            } else {\n                this.on(eStart, onStartEvent);\n                $win.on(eMove, onMoveEvent);\n                $win.on(eEnd, onEndEvent);\n            }\n\n        },\n\n        serialize: function() {\n\n            var data,\n                depth = 0,\n                list  = this,\n                step  = function(level, depth) {\n\n                    var array = [ ], items = level.children(list.options.itemNodeName);\n\n                    items.each(function() {\n\n                        var li   = UI.$(this),\n                            item = UI.$.extend({}, li.data()),\n                            sub  = li.children(list.options.listNodeName);\n\n                        if (sub.length) {\n                            item.children = step(sub, depth + 1);\n                        }\n                        array.push(item);\n                    });\n                    return array;\n                };\n\n            data = step(list.element, depth);\n\n            return data;\n        },\n\n        list: function(options) {\n\n            options = UI.$.extend({}, list.options, options);\n\n            var data  = [],\n                list  = this,\n                depth = 0,\n                step  = function(level, depth, parent) {\n\n                    var items = level.children(options.itemNodeName);\n\n                    items.each(function(index) {\n                        var li   = UI.$(this),\n                            item = UI.$.extend({parent_id: (parent ? parent : null), depth: depth, order: index}, li.data()),\n                            sub  = li.children(options.listNodeName);\n\n                        data.push(item);\n\n                        if (sub.length) {\n                            step(sub, depth + 1, li.data(options.idProperty || 'id'));\n                        }\n                    });\n                };\n\n            step(list.element, depth);\n\n            return data;\n        },\n\n        reset: function() {\n\n            this.mouse = {\n                offsetX   : 0,\n                offsetY   : 0,\n                startX    : 0,\n                startY    : 0,\n                lastX     : 0,\n                lastY     : 0,\n                nowX      : 0,\n                nowY      : 0,\n                distX     : 0,\n                distY     : 0,\n                dirAx     : 0,\n                dirX      : 0,\n                dirY      : 0,\n                lastDirX  : 0,\n                lastDirY  : 0,\n                distAxX   : 0,\n                distAxY   : 0\n            };\n            this.moving     = false;\n            this.dragEl     = null;\n            this.dragRootEl = null;\n            this.dragDepth  = 0;\n            this.hasNewRoot = false;\n            this.pointEl    = null;\n\n            for (var i=0; i<touchedlists.length; i++) {\n                if (!touchedlists[i].children().length) {\n                    touchedlists[i].append(this.tplempty);\n                }\n            }\n\n            touchedlists = [];\n        },\n\n        toggleItem: function(li) {\n            this[li.hasClass(this.options.collapsedClass) ? \"expandItem\":\"collapseItem\"](li);\n        },\n\n        expandItem: function(li) {\n            li.removeClass(this.options.collapsedClass);\n        },\n\n        collapseItem: function(li) {\n            var lists = li.children(this.options.listNodeName);\n            if (lists.length) {\n                li.addClass(this.options.collapsedClass);\n            }\n        },\n\n        expandAll: function() {\n            var list = this;\n            this.find(list.options.itemNodeName).each(function() {\n                list.expandItem(UI.$(this));\n            });\n        },\n\n        collapseAll: function() {\n            var list = this;\n            this.find(list.options.itemNodeName).each(function() {\n                list.collapseItem(UI.$(this));\n            });\n        },\n\n        setParent: function(li) {\n            if (li.children(this.options.listNodeName).length) {\n                li.addClass(\"uk-parent\");\n            }\n        },\n\n        unsetParent: function(li) {\n            li.removeClass('uk-parent '+this.options.collapsedClass);\n            li.children(this.options.listNodeName).remove();\n        },\n\n        dragStart: function(e) {\n            var mouse    = this.mouse,\n                target   = UI.$(e.target),\n                dragItem = target.closest(this.options.itemNodeName),\n                offset   = dragItem.offset();\n\n            this.placeEl.css('height', dragItem.height());\n\n            mouse.offsetX = e.pageX - offset.left;\n            mouse.offsetY = e.pageY - offset.top;\n\n            mouse.startX = mouse.lastX = offset.left;\n            mouse.startY = mouse.lastY = offset.top;\n\n            this.dragRootEl = this.element;\n\n            this.dragEl = UI.$(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);\n            this.dragEl.css('width', dragItem.width());\n\n            draggingElement = this.dragEl;\n\n            this.tmpDragOnSiblings = [dragItem[0].previousSibling, dragItem[0].nextSibling];\n\n            // fix for zepto.js\n            //dragItem.after(this.placeEl).detach().appendTo(this.dragEl);\n            dragItem.after(this.placeEl);\n            dragItem[0].parentNode.removeChild(dragItem[0]);\n            dragItem.appendTo(this.dragEl);\n\n            UI.$body.append(this.dragEl);\n\n            this.dragEl.css({\n                left : offset.left,\n                top  : offset.top\n            });\n\n            // total depth of dragging item\n            var i, depth,\n                items = this.dragEl.find(this.options.itemNodeName);\n            for (i = 0; i < items.length; i++) {\n                depth = UI.$(items[i]).parents(this.options.listNodeName).length;\n                if (depth > this.dragDepth) {\n                    this.dragDepth = depth;\n                }\n            }\n\n            html.addClass(this.options.movingClass);\n        },\n\n        dragStop: function(e) {\n            // fix for zepto.js\n            //this.placeEl.replaceWith(this.dragEl.children(this.options.itemNodeName + ':first').detach());\n            var el = this.dragEl.children(this.options.itemNodeName).first();\n            el[0].parentNode.removeChild(el[0]);\n            this.placeEl.replaceWith(el);\n\n            this.dragEl.remove();\n\n            if (this.hasNewRoot || this.tmpDragOnSiblings[0]!=el[0].previousSibling || (this.tmpDragOnSiblings[1] && this.tmpDragOnSiblings[1]!=el[0].nextSibling)) {\n\n                this.element.trigger('change.uk.nestable',[el, this.hasNewRoot ? \"added\":\"moved\", this.dragRootEl]);\n\n                if (this.hasNewRoot) {\n                    this.dragRootEl.trigger('change.uk.nestable', [el, \"removed\", this.dragRootEl]);\n                }\n            }\n\n            this.trigger('stop.uk.nestable', [this, el]);\n\n            this.reset();\n\n            html.removeClass(this.options.movingClass);\n        },\n\n        dragMove: function(e) {\n            var list, parent, prev, next, depth,\n                opt   = this.options,\n                mouse = this.mouse;\n\n            this.dragEl.css({\n                left : e.pageX - mouse.offsetX,\n                top  : e.pageY - mouse.offsetY\n            });\n\n            // mouse position last events\n            mouse.lastX = mouse.nowX;\n            mouse.lastY = mouse.nowY;\n            // mouse position this events\n            mouse.nowX  = e.pageX;\n            mouse.nowY  = e.pageY;\n            // distance mouse moved between events\n            mouse.distX = mouse.nowX - mouse.lastX;\n            mouse.distY = mouse.nowY - mouse.lastY;\n            // direction mouse was moving\n            mouse.lastDirX = mouse.dirX;\n            mouse.lastDirY = mouse.dirY;\n            // direction mouse is now moving (on both axis)\n            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;\n            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;\n            // axis mouse is now moving on\n            var newAx   = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;\n\n            // do nothing on first move\n            if (!mouse.moving) {\n                mouse.dirAx  = newAx;\n                mouse.moving = true;\n                return;\n            }\n\n            // calc distance moved on this axis (and direction)\n            if (mouse.dirAx !== newAx) {\n                mouse.distAxX = 0;\n                mouse.distAxY = 0;\n            } else {\n                mouse.distAxX += Math.abs(mouse.distX);\n                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {\n                    mouse.distAxX = 0;\n                }\n                mouse.distAxY += Math.abs(mouse.distY);\n                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {\n                    mouse.distAxY = 0;\n                }\n            }\n            mouse.dirAx = newAx;\n\n            /**\n             * move horizontal\n             */\n            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {\n                // reset move distance on x-axis for new phase\n                mouse.distAxX = 0;\n                prev = this.placeEl.prev(opt.itemNodeName);\n                // increase horizontal level if previous sibling exists and is not collapsed\n                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass)) {\n                    // cannot increase level when item above is collapsed\n                    list = prev.find(opt.listNodeName).last();\n                    // check if depth limit has reached\n                    depth = this.placeEl.parents(opt.listNodeName).length;\n                    if (depth + this.dragDepth <= opt.maxDepth) {\n                        // create new sub-level if one doesn't exist\n                        if (!list.length) {\n                            list = UI.$('<' + opt.listNodeName + '/>').addClass(opt.listClass);\n                            list.append(this.placeEl);\n                            prev.append(list);\n                            this.setParent(prev);\n                        } else {\n                            // else append to next level up\n                            list = prev.children(opt.listNodeName).last();\n                            list.append(this.placeEl);\n                        }\n                    }\n                }\n                // decrease horizontal level\n                if (mouse.distX < 0) {\n                    // we can't decrease a level if an item preceeds the current one\n                    next = this.placeEl.next(opt.itemNodeName);\n                    if (!next.length) {\n                        parent = this.placeEl.parent();\n                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);\n                        if (!parent.children().length) {\n                            this.unsetParent(parent.parent());\n                        }\n                    }\n                }\n            }\n\n            var isEmpty = false;\n\n            // find list item under cursor\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'hidden';\n            }\n            this.pointEl = UI.$(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'visible';\n            }\n\n            if (this.pointEl.hasClass(opt.handleClass)) {\n                this.pointEl = this.pointEl.closest(opt.itemNodeName);\n            } else {\n\n                var nestableitem = this.pointEl.closest('.'+opt.itemClass);\n\n                if(nestableitem.length) {\n                    this.pointEl = nestableitem.closest(opt.itemNodeName);\n                }\n            }\n\n            if (this.pointEl.hasClass(opt.emptyClass)) {\n                isEmpty = true;\n            } else if (this.pointEl.data('nestable') && !this.pointEl.children().length) {\n                isEmpty = true;\n                this.pointEl = UI.$(this.tplempty).appendTo(this.pointEl);\n            } else if (!this.pointEl.length || !this.pointEl.hasClass(opt.listitemClass)) {\n                return;\n            }\n\n            // find parent list of item under cursor\n            var pointElRoot = this.element,\n                tmpRoot     = this.pointEl.closest('.'+this.options.listBaseClass),\n                isNewRoot   = pointElRoot[0] !== this.pointEl.closest('.'+this.options.listBaseClass)[0],\n                $newRoot    = tmpRoot;\n\n            /**\n             * move vertical\n             */\n            if (!mouse.dirAx || isNewRoot || isEmpty) {\n                // check if groups match if dragging over new root\n                if (isNewRoot && opt.group !== $newRoot.data('nestable-group')) {\n                    return;\n                } else {\n                    touchedlists.push(pointElRoot);\n                }\n\n                // check depth limit\n                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;\n\n                if (depth > opt.maxDepth) {\n                    return;\n                }\n\n                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);\n\n                parent = this.placeEl.parent();\n\n                // if empty create new list to replace empty placeholder\n                if (isEmpty) {\n                    this.pointEl.replaceWith(this.placeEl);\n                } else if (before) {\n                    this.pointEl.before(this.placeEl);\n                } else {\n                    this.pointEl.after(this.placeEl);\n                }\n\n                if (!parent.children().length) {\n                    if(!parent.data(\"nestable\")) this.unsetParent(parent.parent());\n                }\n\n                if (!this.dragRootEl.find(opt.itemNodeName).length && !this.dragRootEl.children().length) {\n                    this.dragRootEl.append(this.tplempty);\n                }\n\n                // parent root list has changed\n                if (isNewRoot) {\n                    this.dragRootEl = tmpRoot;\n                    this.hasNewRoot = this.element[0] !== this.dragRootEl[0];\n                }\n            }\n        }\n\n    });\n\n    return UI.nestable;\n});\n"],"sourceRoot":"/source/"}