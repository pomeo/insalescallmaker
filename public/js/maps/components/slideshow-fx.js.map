{"version":3,"sources":["components/slideshow-fx.js"],"names":["addon","component","window","UIkit","define","amd","UI","Animations","slideshow","animations","$","extend","slice","current","next","dir","fromfx","data","fade","apply","this","arguments","bar","d","Deferred","sliceWidth","Math","ceil","element","width","options","slices","bgimage","css","ghost","top","left","container","height","opacity","zIndex","ghostWidth","ghostHeight","pos","i","clipfrom","clipto","position","background-image","clip","transition","duration","-webkit-transition","append","children","last","on","support","end","remove","resolve","each","promise","slice-up","slice-down","slice-up-down","fold","transform-origin","transform","prepend","first","puzzle","box","rect","$this","boxCols","round","boxWidth","boxRows","boxHeight","rows","cols","join","-webkit-transform","boxes","shuffle","prevCol","rowIndex","colIndex","timeBuff","box2Darr","reverse","row","boxes-reverse","random-fx","fxIndex","undefined","arr","j","x","length","parseInt","random"],"mappings":"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","file":"components/slideshow-fx.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n(function(addon) {\n\n    var component;\n\n    if (window.UIkit) {\n        component = addon(UIkit);\n    }\n\n    if (typeof define == \"function\" && define.amd) {\n        define(\"uikit-slideshow-fx\", [\"uikit\"], function() {\n            return component || addon(UIkit);\n        });\n    }\n\n})(function(UI) {\n\n    \"use strict\";\n\n    var Animations = UI.slideshow.animations;\n\n    UI.$.extend(UI.slideshow.animations, {\n        'slice': function(current, next, dir, fromfx) {\n\n            if (!current.data('cover')) {\n                return Animations.fade.apply(this, arguments);\n            }\n\n            var d = UI.$.Deferred();\n\n            var sliceWidth = Math.ceil(this.element.width() / this.options.slices),\n                bgimage    = next.data('cover').css('background-image'),\n                ghost      = UI.$('<li></li>').css({\n                    top    : 0,\n                    left   : 0,\n                    width  : this.container.width(),\n                    height : this.container.height(),\n                    opacity: 1,\n                    zIndex : 15\n                }),\n                ghostWidth  = ghost.width(),\n                ghostHeight = ghost.height(),\n                pos         = fromfx == 'slice-up' ? ghostHeight:'0',\n                bar;\n\n            for (var i = 0; i < this.options.slices; i++) {\n\n                if (fromfx == 'slice-up-down') {\n                    pos = ((i % 2) + 2) % 2==0 ? '0':ghostHeight;\n                }\n\n                var width    = (i == this.options.slices-1) ? sliceWidth : sliceWidth,\n                    clipto   = ('rect(0px, '+(width*(i+1))+'px, '+ghostHeight+'px, '+(sliceWidth*i)+'px)'),\n                    clipfrom;\n\n                //slice-down - default\n                clipfrom = ('rect(0px, '+(width*(i+1))+'px, 0px, '+(sliceWidth*i)+'px)');\n\n                if (fromfx == 'slice-up' || (fromfx == 'slice-up-down' && ((i % 2) + 2) % 2==0 )) {\n                    clipfrom = ('rect('+ghostHeight+'px, '+(width*(i+1))+'px, '+ghostHeight+'px, '+(sliceWidth*i)+'px)');\n                }\n\n                bar = UI.$('<div class=\"uk-cover-background\"></div>').css({\n                    'position'           : 'absolute',\n                    'top'                : 0,\n                    'left'               : 0,\n                    'width'              : ghostWidth,\n                    'height'             : ghostHeight,\n                    'background-image'   : bgimage,\n                    'clip'               : clipfrom,\n                    'opacity'            : 0,\n                    'transition'         : 'all '+this.options.duration+'ms ease-in-out '+(i*60)+'ms',\n                    '-webkit-transition' : 'all '+this.options.duration+'ms ease-in-out '+(i*60)+'ms'\n\n                }).data('clip', clipto);\n\n                ghost.append(bar);\n            }\n\n            this.container.append(ghost);\n\n            ghost.children().last().on(UI.support.transition.end, function() {\n                ghost.remove();\n                d.resolve();\n            });\n\n            ghost.width();\n\n            ghost.children().each(function() {\n                var bar = UI.$(this);\n\n                bar.css({\n                    'clip': bar.data('clip'),\n                    'opacity': 1\n                });\n            });\n\n            return d.promise();\n        },\n\n        'slice-up': function(current, next, dir) {\n            return Animations.slice.apply(this, [current, next, dir, 'slice-up']);\n        },\n\n        'slice-down': function(current, next, dir) {\n            return Animations.slice.apply(this, [current, next, dir, 'slice-down']);\n        },\n\n        'slice-up-down': function(current, next, dir) {\n            return Animations.slice.apply(this, [current, next, dir, 'slice-up-down']);\n        },\n\n        'fold': function(current, next, dir) {\n\n            if (!next.data('cover')) {\n                return Animations.fade.apply(this, arguments);\n            }\n\n            var d = UI.$.Deferred();\n\n            var sliceWidth = Math.ceil(this.element.width() / this.options.slices),\n                bgimage    = next.data('cover').css('background-image'),\n                ghost      = UI.$('<li></li>').css({\n                    width  : next.width(),\n                    height : next.height(),\n                    opacity: 1,\n                    zIndex : 15\n                }),\n                ghostWidth  = next.width(),\n                ghostHeight = next.height(),\n                bar;\n\n            for (var i = 0; i < this.options.slices; i++) {\n\n                var width = (i == this.options.slices-1) ? (ghostWidth - (sliceWidth*i)) : sliceWidth;\n\n                bar = UI.$('<div class=\"uk-cover-background\"></div>').css({\n                    'position'           : 'absolute',\n                    'top'                : 0,\n                    'left'               : 0,\n                    'width'              : ghostWidth,\n                    'height'             : ghostHeight,\n                    'background-image'   : bgimage,\n                    'transform-origin'   : (sliceWidth*i)+'px 0 0',\n                    'clip'               : ('rect(0px, '+(sliceWidth*(i+1))+'px, '+ghostHeight+'px, '+(sliceWidth*i)+'px)'),\n                    'opacity'            : 0,\n                    'transform'          : 'scaleX(0.000001)',\n                    'transition'         : 'all '+this.options.duration+'ms ease-in-out '+(100+i*60)+'ms',\n                    '-webkit-transition' : 'all '+this.options.duration+'ms ease-in-out '+(100+i*60)+'ms'\n                });\n\n                ghost.prepend(bar);\n            }\n\n            this.container.append(ghost);\n\n            ghost.width();\n\n            ghost.children().first().on(UI.support.transition.end, function() {\n                ghost.remove();\n                d.resolve();\n            }).end().css({\n                'transform': 'scaleX(1)',\n                'opacity': 1\n            });\n\n            return d.promise();\n        },\n\n        'puzzle': function(current, next, dir) {\n\n            if (!next.data('cover')) {\n                return Animations.fade.apply(this, arguments);\n            }\n\n            var d = UI.$.Deferred(), $this = this;\n\n            var boxCols   = Math.round(this.options.slices/2),\n                boxWidth  = Math.round(next.width()/boxCols),\n                boxRows   = Math.round(next.height()/boxWidth),\n                boxHeight = Math.round(next.height()/boxRows)+1,\n                bgimage   = next.data('cover').css('background-image'),\n                ghost     = UI.$('<li></li>').css({\n                    width   : this.container.width(),\n                    height  : this.container.height(),\n                    opacity : 1,\n                    zIndex  : 15\n                }),\n                ghostWidth  = this.container.width(),\n                ghostHeight = this.container.height(),\n                box, rect, width;\n\n            for (var rows = 0; rows < boxRows; rows++) {\n\n                for (var cols = 0; cols < boxCols; cols++) {\n\n                    width  = (cols == boxCols-1) ? (boxWidth + 2) : boxWidth;\n\n                    rect = [\n                        (boxHeight * rows)       +'px', // top\n                        (width  * (cols+1))      +'px', // right\n                        (boxHeight * (rows + 1)) +'px', // bottom\n                        (boxWidth  * cols)       +'px'  // left\n                    ];\n\n                    box = UI.$('<div class=\"uk-cover-background\"></div>').css({\n                        'position'          : 'absolute',\n                        'top'               : 0,\n                        'left'              : 0,\n                        'opacity'           : 0,\n                        'width'             : ghostWidth,\n                        'height'            : ghostHeight,\n                        'background-image'  : bgimage,\n                        'clip'              : ('rect('+rect.join(',')+')'),\n                        '-webkit-transform' : 'translateZ(0)', // fixes webkit opacity flickering bug\n                        'transform'         : 'translateZ(0)'          // fixes moz opacity flickering bug\n                    });\n\n                    ghost.append(box);\n                }\n            }\n\n            this.container.append(ghost);\n\n            var boxes = shuffle(ghost.children());\n\n            boxes.each(function(i) {\n                UI.$(this).css({\n                    'transition': 'all '+$this.options.duration+'ms ease-in-out '+(50+i*25)+'ms',\n                    '-webkit-transition': 'all '+$this.options.duration+'ms ease-in-out '+(50+i*25)+'ms'\n                });\n            }).last().on(UI.support.transition.end, function() {\n                ghost.remove();\n                d.resolve();\n            });\n\n            ghost.width();\n\n            boxes.css({'opacity': 1});\n\n            return d.promise();\n        },\n\n        'boxes': function(current, next, dir, fromfx) {\n\n            if (!next.data('cover')) {\n                return Animations.fade.apply(this, arguments);\n            }\n\n            var d = UI.$.Deferred();\n\n            var boxCols   = Math.round(this.options.slices/2),\n                boxWidth  = Math.round(next.width()/boxCols),\n                boxRows   = Math.round(next.height()/boxWidth),\n                boxHeight = Math.round(next.height()/boxRows)+1,\n                bgimage   = next.data('cover').css('background-image'),\n                ghost     = UI.$('<li></li>').css({\n                    width   : next.width(),\n                    height  : next.height(),\n                    opacity : 1,\n                    zIndex  : 15\n                }),\n                ghostWidth  = next.width(),\n                ghostHeight = next.height(),\n                box, rect, width, cols;\n\n            for (var rows = 0; rows < boxRows; rows++) {\n\n                for (cols = 0; cols < boxCols; cols++) {\n\n                    width  = (cols == boxCols-1) ? (boxWidth + 2) : boxWidth;\n\n                    rect = [\n                        (boxHeight * rows)       +'px', // top\n                        (width  * (cols+1))      +'px', // right\n                        (boxHeight * (rows + 1)) +'px', // bottom\n                        (boxWidth  * cols)       +'px'  // left\n                    ];\n\n                    box = UI.$('<div class=\"uk-cover-background\"></div>').css({\n                        'position'          : 'absolute',\n                        'top'               : 0,\n                        'left'              : 0,\n                        'opacity'           : 1,\n                        'width'             : ghostWidth,\n                        'height'            : ghostHeight,\n                        'background-image'  : bgimage,\n                        'transform-origin'  : rect[3]+' '+rect[0]+' 0',\n                        'clip'              : ('rect('+rect.join(',')+')'),\n                        '-webkit-transform' : 'scale(0.0000000000000001)',\n                        'transform'         : 'scale(0.0000000000000001)'\n                    });\n\n                    ghost.append(box);\n                }\n            }\n\n            this.container.append(ghost);\n\n            var rowIndex = 0, colIndex = 0, timeBuff = 0, box2Darr = [[]], boxes = ghost.children(), prevCol;\n\n            if (fromfx == 'boxes-reverse') {\n                boxes = [].reverse.apply(boxes);\n            }\n\n            boxes.each(function() {\n\n                box2Darr[rowIndex][colIndex] = UI.$(this);\n                colIndex++;\n\n                if(colIndex == boxCols) {\n                    rowIndex++;\n                    colIndex = 0;\n                    box2Darr[rowIndex] = [];\n                }\n            });\n\n            for (cols = 0, prevCol = 0; cols < (boxCols * boxRows); cols++) {\n\n                prevCol = cols;\n\n                for (var row = 0; row < boxRows; row++) {\n\n                    if (prevCol >= 0 && prevCol < boxCols) {\n\n                        box2Darr[row][prevCol].css({\n                            'transition': 'all '+this.options.duration+'ms linear '+(50+timeBuff)+'ms',\n                            '-webkit-transition': 'all '+this.options.duration+'ms linear '+(50+timeBuff)+'ms'\n                        });\n                    }\n                    prevCol--;\n                }\n                timeBuff += 100;\n            }\n\n            boxes.last().on(UI.support.transition.end, function() {\n                ghost.remove();\n                d.resolve();\n            });\n\n            ghost.width();\n\n            boxes.css({\n                '-webkit-transform': 'scale(1)',\n                'transform': 'scale(1)'\n            });\n\n            return d.promise();\n        },\n\n        'boxes-reverse': function(current, next, dir) {\n            return Animations.boxes.apply(this, [current, next, dir, 'boxes-reverse']);\n        },\n\n        'random-fx': function(){\n\n            var animations = ['slice-up', 'fold', 'puzzle', 'slice-down', 'boxes', 'slice-up-down', 'boxes-reverse'];\n\n            this.fxIndex = (this.fxIndex === undefined ? -1 : this.fxIndex) + 1;\n\n            if (!animations[this.fxIndex]) this.fxIndex = 0;\n\n            return Animations[animations[this.fxIndex]].apply(this, arguments);\n        },\n    });\n\n\n    // helper functions\n\n    // Shuffle an array\n    var shuffle = function(arr) {\n        for (var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x) {}\n        return arr;\n    };\n\n    return UI.slideshow.animations;\n});\n"],"sourceRoot":"/source/"}