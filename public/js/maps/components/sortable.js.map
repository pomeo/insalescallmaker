{"version":3,"sources":["components/sortable.js"],"names":["addon","component","window","UIkit","define","amd","UI","isBelow","el1","el2","parent","parentNode","cur","previousSibling","nodeType","moveUpToChildNode","child","ownerDocument","prevent","e","stopPropagation","preventDefault","returnValue","draggingPlaceholder","moving","dragging","clickedlink","delayIdle","supportsTouch","DocumentTouch","document","supportsDragAndDrop","div","createElement","defaults","warp","animation","threshold","childClass","placeholderClass","overClass","draggingClass","dragMovingClass","dragCustomClass","handleClass","stop","start","change","boot","ready","context","$","each","ele","this","data","sortable","Utils","options","attr","$html","on","src","originalEvent","targetTouches","Math","abs","pageX","pos","x","pageY","y","apply","show","$current","addClass","$sortable","element","children","offset","left","parseInt","top","css","$win","scrollTop","ceil","height","innerHeight","location","href","init","delegate","fn","touch","touches","target","elementFromPoint","body","scrollLeft","hasClass","$this","addFakeDragHandlers","addEventListener","handleTouchMove","handleDragEnter","handleDragLeave","handleDrop","handleDragEnd","removeFakeDragHandlers","removeEventListener","currentlyDraggingElement","currentlyDraggingTarget","Object","keys","forEach","key","String","indexOf","ctrlKey","metaKey","shiftKey","stopImmediatePropagation","handleDragStart","button","handle","closest","length","is","dataTransfer","effectAllowed","dropEffect","setData","remove","join","display","width","padding","append","html","appendTo","trigger","handleDragOver","debounce","previousCounter","dragenterData","moveElementNextTo","removeClass","type","thisSibling","nextSibling","insertBefore","checkDisplay","val","arguments","max","removeAttr","elementToMoveNextTo","list","next","count","position","before","min-width","setTimeout","animate","pointer-events","serialize","item","extend","push"],"mappings":"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","file":"components/sortable.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n/*\n  * Based on nativesortable - Copyright (c) Brian Grinstead - https://github.com/bgrins/nativesortable\n  */\n(function(addon) {\n\n    var component;\n\n    if (window.UIkit) {\n        component = addon(UIkit);\n    }\n\n    if (typeof define == \"function\" && define.amd) {\n        define(\"uikit-sortable\", [\"uikit\"], function(){\n            return component || addon(UIkit);\n        });\n    }\n\n})(function(UI){\n\n    \"use strict\";\n\n    var supportsTouch       = ('ontouchstart' in window) || (window.DocumentTouch && document instanceof DocumentTouch),\n        supportsDragAndDrop = !supportsTouch && (function() {\n        var div = document.createElement('div');\n        return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n    })(),\n\n    draggingPlaceholder, moving, dragging, clickedlink, delayIdle;\n\n    // disable native dragndrop support for now\n    supportsDragAndDrop = false;\n\n    UI.component('sortable', {\n\n        defaults: {\n\n            warp             : false,\n            animation        : 150,\n            threshold        : 10,\n\n            childClass       : 'uk-sortable-item',\n            placeholderClass : 'uk-sortable-placeholder',\n            overClass        : 'uk-sortable-over',\n            draggingClass    : 'uk-sortable-dragged',\n            dragMovingClass  : 'uk-sortable-moving',\n            dragCustomClass  : '',\n            handleClass      : false,\n\n            stop             : function() {},\n            start            : function() {},\n            change           : function() {}\n        },\n\n        boot: function() {\n\n            // auto init\n            UI.ready(function(context) {\n\n                UI.$(\"[data-uk-sortable]\", context).each(function(){\n\n                    var ele = UI.$(this);\n\n                    if(!ele.data(\"sortable\")) {\n                        var plugin = UI.sortable(ele, UI.Utils.options(ele.attr(\"data-uk-sortable\")));\n                    }\n                });\n            });\n\n            UI.$html.on('mousemove touchmove', function(e) {\n\n                if (delayIdle) {\n\n                    var src = e.originalEvent.targetTouches ? e.originalEvent.targetTouches[0] : e;\n\n                    if (Math.abs(src.pageX - delayIdle.pos.x) > delayIdle.threshold || Math.abs(src.pageY - delayIdle.pos.y) > delayIdle.threshold) {\n                        delayIdle.apply();\n                    }\n                }\n\n                if (draggingPlaceholder) {\n\n                    if (!moving) {\n                        moving = true;\n                        draggingPlaceholder.show();\n\n                        draggingPlaceholder.$current.addClass(draggingPlaceholder.$sortable.options.placeholderClass);\n                        draggingPlaceholder.$sortable.element.children().addClass(draggingPlaceholder.$sortable.options.childClass);\n\n                        UI.$html.addClass(draggingPlaceholder.$sortable.options.dragMovingClass);\n                    }\n\n                    var offset = draggingPlaceholder.data('mouse-offset'),\n                    left   = parseInt(e.originalEvent.pageX, 10) + offset.left,\n                    top    = parseInt(e.originalEvent.pageY, 10) + offset.top;\n\n                    draggingPlaceholder.css({'left': left, 'top': top });\n\n                    if (top < UI.$win.scrollTop()) {\n                        UI.$win.scrollTop(UI.$win.scrollTop() - Math.ceil(draggingPlaceholder.height()/2));\n                    } else if ( (top + draggingPlaceholder.height()) > (window.innerHeight + UI.$win.scrollTop()) ) {\n                        UI.$win.scrollTop(UI.$win.scrollTop() + Math.ceil(draggingPlaceholder.height()/2));\n                    }\n                }\n            });\n\n            UI.$html.on('mouseup touchend', function() {\n\n                if(!moving && clickedlink) {\n                    location.href = clickedlink.attr('href');\n                }\n\n                delayIdle = clickedlink = false;\n            });\n        },\n\n        init: function() {\n\n            var $this                    = this,\n                element                  = this.element[0],\n                currentlyDraggingElement = null,\n                currentlyDraggingTarget  = null,\n                children;\n\n            Object.keys(this.options).forEach(function(key){\n\n                if (String($this.options[key]).indexOf('Class')!=-1) {\n                    $this.options[key] = $this.options[key];\n                }\n            });\n\n            if (supportsDragAndDrop) {\n                this.element.children().attr(\"draggable\", \"true\");\n\n            } else {\n\n                // prevent leaving page after link clicking\n                // prevent leaving page after link clicking\n                this.element.on('mousedown touchstart', 'a[href]', function(e) {\n                    // don't break browser shortcuts for click+open in new tab\n                    if(!e.ctrlKey && !e.metaKey && !e.shiftKey) {\n                        clickedlink = UI.$(this);\n                        e.preventDefault();\n                    }\n\n                }).on('click', 'a[href]', function(e) {\n                    if(!e.ctrlKey && !e.metaKey && !e.shiftKey) {\n                        clickedlink = UI.$(this);\n                        e.stopImmediatePropagation();\n                        return false;\n                    }\n                });\n            }\n\n            var handleDragStart = delegate(function(e) {\n\n                moving = false;\n                dragging = false;\n\n                var target = UI.$(e.target), children = $this.element.children();\n\n                if (!supportsTouch && e.button==2) {\n                    return;\n                }\n\n                if ($this.options.handleClass) {\n\n                    var handle = target.hasClass($this.options.handleClass) ? target : target.closest('.'+$this.options.handleClass, element);\n\n                    if (!handle.length) {\n                        //e.preventDefault();\n                        return;\n                    }\n                }\n\n                // prevent dragging if taget is a form field\n                if (target.is(':input')) {\n                    return;\n                }\n\n                if (e.dataTransfer) {\n                    e.dataTransfer.effectAllowed = 'move';\n                    e.dataTransfer.dropEffect = 'move';\n                    e.dataTransfer.setData('Text', \"*\"); // Need to set to something or else drag doesn't start\n                }\n\n                currentlyDraggingElement = this;\n\n                // init drag placeholder\n                if (draggingPlaceholder) draggingPlaceholder.remove();\n\n                var $current = UI.$(currentlyDraggingElement), offset = $current.offset();\n\n                delayIdle = {\n\n                    pos       : { x:e.pageX, y:e.pageY },\n                    threshold : $this.options.threshold,\n                    'apply'   : function() {\n\n                        draggingPlaceholder = UI.$('<div class=\"'+([$this.options.draggingClass, $this.options.dragCustomClass].join(' '))+'\"></div>').css({\n                            display : 'none',\n                            top     : offset.top,\n                            left    : offset.left,\n                            width   : $current.width(),\n                            height  : $current.height(),\n                            padding : $current.css('padding')\n                        }).data('mouse-offset', {\n                            'left': offset.left - parseInt(e.pageX, 10),\n                            'top' : offset.top  - parseInt(e.pageY, 10)\n                        }).append($current.html()).appendTo('body');\n\n                        draggingPlaceholder.$current  = $current;\n                        draggingPlaceholder.$sortable = $this;\n\n                        addFakeDragHandlers();\n\n                        $this.options.start(this, currentlyDraggingElement);\n                        $this.trigger('start.uk.sortable', [$this, currentlyDraggingElement]);\n\n                        delayIdle = false;\n                    }\n                }\n\n                if (!supportsDragAndDrop) {\n                    e.preventDefault();\n                }\n            });\n\n            var handleDragOver = delegate(function(e) {\n\n                if (!currentlyDraggingElement) {\n                    return true;\n                }\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                return false;\n            });\n\n            var handleDragEnter = delegate(UI.Utils.debounce(function(e) {\n\n                if (!currentlyDraggingElement || currentlyDraggingElement === this) {\n                    return true;\n                }\n\n                // Prevent dragenter on a child from allowing a dragleave on the container\n                var previousCounter = $this.dragenterData(this);\n\n                $this.dragenterData(this, previousCounter + 1);\n\n                if (previousCounter === 0) {\n\n                    UI.$(this).addClass($this.options.overClass);\n\n                    if (!$this.options.warp) {\n                        $this.moveElementNextTo(currentlyDraggingElement, this);\n                    }\n                }\n\n                return false;\n            }), 40);\n\n            var handleDragLeave = delegate(function(e) {\n\n                // Prevent dragenter on a child from allowing a dragleave on the container\n                var previousCounter = $this.dragenterData(this);\n                $this.dragenterData(this, previousCounter - 1);\n\n                // This is a fix for child elements firing dragenter before the parent fires dragleave\n                if (!$this.dragenterData(this)) {\n                    UI.$(this).removeClass($this.options.overClass);\n                    $this.dragenterData(this, false);\n                }\n            });\n\n            var handleDrop = delegate(function(e) {\n\n\n                if (e.type === 'drop') {\n\n                    if (e.stopPropagation) {\n                        e.stopPropagation();\n                    }\n\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    }\n                }\n\n                if (!dragging && !$this.options.warp) {\n                    return;\n                }\n\n                if ($this.options.warp) {\n\n                    var thisSibling = currentlyDraggingElement.nextSibling;\n                    this.parentNode.insertBefore(currentlyDraggingElement, this);\n                    this.parentNode.insertBefore(this, thisSibling);\n\n                    UI.Utils.checkDisplay($this.element.parent());\n                }\n\n                $this.options.change(this, currentlyDraggingElement);\n                $this.trigger('change.uk.sortable', [$this, currentlyDraggingElement]);\n            });\n\n            var handleDragEnd = function(e) {\n\n                currentlyDraggingElement = null;\n                currentlyDraggingTarget  = null;\n\n                $this.element.children().each(function() {\n                    if (this.nodeType === 1) {\n                        UI.$(this).removeClass($this.options.overClass).removeClass($this.options.placeholderClass).removeClass($this.options.childClass);\n                        $this.dragenterData(this, false);\n                    }\n                });\n\n                UI.$('html').removeClass($this.options.dragMovingClass);\n\n                removeFakeDragHandlers();\n\n                $this.options.stop(this);\n                $this.trigger('stop.uk.sortable', [$this]);\n\n                draggingPlaceholder.remove();\n                draggingPlaceholder = null;\n            };\n\n            var handleTouchMove = delegate(function(e) {\n\n                if (!currentlyDraggingElement ||\n                    currentlyDraggingElement === this ||\n                    currentlyDraggingTarget === this) {\n                    return true;\n                }\n\n                $this.element.children().removeClass($this.options.overClass);\n                currentlyDraggingTarget = this;\n\n                if (!$this.options.warp) {\n                    $this.moveElementNextTo(currentlyDraggingElement, this);\n                } else {\n                    UI.$(this).addClass($this.options.overClass);\n                }\n\n                return prevent(e);\n            });\n\n            function delegate(fn) {\n                return function(e) {\n\n                    var touch  = (supportsTouch && e.touches && e.touches[0]) || { },\n                        target = touch.target || e.target;\n\n                    // Fix event.target for a touch event\n                    if (supportsTouch && document.elementFromPoint) {\n                        target = document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - document.body.scrollTop);\n                    }\n\n                    if (UI.$(target).hasClass($this.options.childClass)) {\n                        fn.apply(target, [e]);\n                    } else if (target !== element) {\n\n                        // If a child is initiating the event or ending it, then use the container as context for the callback.\n                        var context = moveUpToChildNode(element, target);\n\n                        if (context) {\n                            fn.apply(context, [e]);\n                        }\n                    }\n                };\n            }\n\n            // Opera and mobile devices do not support drag and drop.  http://caniuse.com/dragndrop\n            // Bind/unbind standard mouse/touch events as a polyfill.\n            function addFakeDragHandlers() {\n                if (!supportsDragAndDrop) {\n                    if (supportsTouch) {\n                        element.addEventListener(\"touchmove\", handleTouchMove, false);\n                    } else {\n                        element.addEventListener('mouseover', handleDragEnter, false);\n                        element.addEventListener('mouseout', handleDragLeave, false);\n                    }\n\n                    element.addEventListener(supportsTouch ? 'touchend' : 'mouseup', handleDrop, false);\n                    document.addEventListener(supportsTouch ? 'touchend' : 'mouseup', handleDragEnd, false);\n                    document.addEventListener(\"selectstart\", prevent, false);\n\n                }\n            }\n\n            function removeFakeDragHandlers() {\n                if (!supportsDragAndDrop) {\n                    if (supportsTouch) {\n                        element.removeEventListener(\"touchmove\", handleTouchMove, false);\n                    } else {\n                        element.removeEventListener('mouseover', handleDragEnter, false);\n                        element.removeEventListener('mouseout', handleDragLeave, false);\n                    }\n\n                    element.removeEventListener(supportsTouch ? 'touchend' : 'mouseup', handleDrop, false);\n                    document.removeEventListener(supportsTouch ? 'touchend' : 'mouseup', handleDragEnd, false);\n                    document.removeEventListener(\"selectstart\", prevent, false);\n                }\n            }\n\n            if (supportsDragAndDrop) {\n                element.addEventListener('dragstart', handleDragStart, false);\n                element.addEventListener('dragenter', handleDragEnter, false);\n                element.addEventListener('dragleave', handleDragLeave, false);\n                element.addEventListener('drop', handleDrop, false);\n                element.addEventListener('dragover', handleDragOver, false);\n                element.addEventListener('dragend', handleDragEnd, false);\n            } else {\n\n                element.addEventListener(supportsTouch ? 'touchstart':'mousedown', handleDragStart, false);\n            }\n        },\n\n        dragenterData: function(element, val) {\n\n            element = UI.$(element);\n\n            if (arguments.length == 1) {\n                return parseInt(element.attr('data-child-dragenter'), 10) || 0;\n            } else if (!val) {\n                element.removeAttr('data-child-dragenter');\n            } else {\n                element.attr('data-child-dragenter', Math.max(0, val));\n            }\n        },\n\n        moveElementNextTo: function(element, elementToMoveNextTo) {\n\n            dragging = true;\n\n            var $this    = this,\n                list     = UI.$(element).parent().css('min-height', ''),\n                next     = isBelow(element, elementToMoveNextTo) ? elementToMoveNextTo : elementToMoveNextTo.nextSibling,\n                children = list.children(),\n                count    = children.length;\n\n            if ($this.options.warp || !$this.options.animation) {\n                elementToMoveNextTo.parentNode.insertBefore(element, next);\n                UI.Utils.checkDisplay($this.element.parent());\n                return;\n            }\n\n            list.css('min-height', list.height());\n\n            children.stop().each(function(){\n                var ele = UI.$(this),\n                    offset = ele.position();\n\n                    offset.width = ele.width();\n\n                ele.data('offset-before', offset);\n            });\n\n            elementToMoveNextTo.parentNode.insertBefore(element, next);\n\n            UI.Utils.checkDisplay($this.element.parent());\n\n            children = list.children().each(function() {\n                var ele    = UI.$(this);\n                ele.data('offset-after', ele.position());\n            }).each(function() {\n                var ele    = UI.$(this),\n                    before = ele.data('offset-before');\n                ele.css({'position':'absolute', 'top':before.top, 'left':before.left, 'min-width':before.width });\n            });\n\n            children.each(function(){\n\n                var ele    = UI.$(this),\n                    before = ele.data('offset-before'),\n                    offset = ele.data('offset-after');\n\n                    ele.css('pointer-events', 'none').width();\n\n                    setTimeout(function(){\n                        ele.animate({'top':offset.top, 'left':offset.left}, $this.options.animation, function() {\n                            ele.css({'position':'','top':'', 'left':'', 'min-width': '', 'pointer-events':''}).removeClass($this.options.overClass).attr('data-child-dragenter', '');\n                            count--\n                            if (!count) {\n                                list.css('min-height', '');\n                                UI.Utils.checkDisplay($this.element.parent());\n                            }\n                        });\n                    }, 0);\n            });\n        },\n\n        serialize: function() {\n\n            var data = [], item;\n\n            this.element.children().each(function() {\n                item = UI.$.extend({}, UI.$(this).data());\n                data.push(item);\n            });\n\n            return data;\n        }\n    });\n\n    // helpers\n\n    function isBelow(el1, el2) {\n\n        var parent = el1.parentNode;\n\n        if (el2.parentNode != parent) {\n            return false;\n        }\n\n        var cur = el1.previousSibling;\n\n        while (cur && cur.nodeType !== 9) {\n            if (cur === el2) {\n                return true;\n            }\n            cur = cur.previousSibling;\n        }\n\n        return false;\n    }\n\n    function moveUpToChildNode(parent, child) {\n        var cur = child;\n        if (cur == parent) { return null; }\n\n        while (cur) {\n            if (cur.parentNode === parent) {\n                return cur;\n            }\n\n            cur = cur.parentNode;\n            if ( !cur || !cur.ownerDocument || cur.nodeType === 11 ) {\n                break;\n            }\n        }\n        return null;\n    }\n\n    function prevent(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n        }\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        e.returnValue = false;\n    }\n\n    return UI.sortable;\n});\n"],"sourceRoot":"/source/"}