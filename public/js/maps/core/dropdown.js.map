{"version":3,"sources":["core/dropdown.js"],"names":["UI","hoverIdle","active","component","defaults","mode","remaintime","justify","boundary","$win","delay","remainIdle","boot","triggerevent","support","touch","$html","on","e","ele","$","this","data","dropdown","Utils","options","attr","element","trigger","find","length","preventDefault","init","$this","centered","hasClass","justified","flipped","$target","target","parents","is","parent","blur","hide","show","clearTimeout","setTimeout","bind","off","removeClass","checkDimensions","addClass","checkDisplay","registerOuterClick","css","langdirection","offset","width","outerWidth","boundarywidth","boundaryoffset","left","parseFloat","jwidth","right1","right2","UIkit"],"mappings":"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","file":"core/dropdown.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n(function(UI) {\n\n    \"use strict\";\n\n    var active = false, hoverIdle;\n\n    UI.component('dropdown', {\n\n        defaults: {\n           'mode'       : 'hover',\n           'remaintime' : 800,\n           'justify'    : false,\n           'boundary'   : UI.$win,\n           'delay'      : 0\n        },\n\n        remainIdle: false,\n\n        boot: function() {\n\n            var triggerevent = UI.support.touch ? \"click\" : \"mouseenter\";\n\n            // init code\n            UI.$html.on(triggerevent+\".dropdown.uikit\", \"[data-uk-dropdown]\", function(e) {\n\n                var ele = UI.$(this);\n\n                if (!ele.data(\"dropdown\")) {\n\n                    var dropdown = UI.dropdown(ele, UI.Utils.options(ele.attr(\"data-uk-dropdown\")));\n\n                    if (triggerevent==\"click\" || (triggerevent==\"mouseenter\" && dropdown.options.mode==\"hover\")) {\n                        dropdown.element.trigger(triggerevent);\n                    }\n\n                    if(dropdown.element.find('.uk-dropdown').length) {\n                        e.preventDefault();\n                    }\n                }\n            });\n        },\n\n        init: function() {\n\n            var $this = this;\n\n            this.dropdown  = this.find('.uk-dropdown');\n\n            this.centered  = this.dropdown.hasClass('uk-dropdown-center');\n            this.justified = this.options.justify ? UI.$(this.options.justify) : false;\n\n            this.boundary  = UI.$(this.options.boundary);\n            this.flipped   = this.dropdown.hasClass('uk-dropdown-flip');\n\n            if (!this.boundary.length) {\n                this.boundary = UI.$win;\n            }\n\n            if (this.options.mode == \"click\" || UI.support.touch) {\n\n                this.on(\"click.uikit.dropdown\", function(e) {\n\n                    var $target = UI.$(e.target);\n\n                    if (!$target.parents(\".uk-dropdown\").length) {\n\n                        if ($target.is(\"a[href='#']\") || $target.parent().is(\"a[href='#']\") || ($this.dropdown.length && !$this.dropdown.is(\":visible\")) ){\n                            e.preventDefault();\n                        }\n\n                        $target.blur();\n                    }\n\n                    if (!$this.element.hasClass('uk-open')) {\n\n                        $this.show();\n\n                    } else {\n\n                        if ($target.is(\"a:not(.js-uk-prevent)\") || $target.is(\".uk-dropdown-close\") || !$this.dropdown.find(e.target).length) {\n                            $this.hide();\n                        }\n                    }\n                });\n\n            } else {\n\n                this.on(\"mouseenter\", function(e) {\n\n                    if ($this.remainIdle) {\n                        clearTimeout($this.remainIdle);\n                    }\n\n                    if (hoverIdle) {\n                        clearTimeout(hoverIdle);\n                    }\n\n                    hoverIdle = setTimeout($this.show.bind($this), $this.options.delay);\n\n                }).on(\"mouseleave\", function() {\n\n                    if (hoverIdle) {\n                        clearTimeout(hoverIdle);\n                    }\n\n                    $this.remainIdle = setTimeout(function() {\n                        $this.hide();\n                    }, $this.options.remaintime);\n\n                }).on(\"click\", function(e){\n\n                    var $target = UI.$(e.target);\n\n                    if ($this.remainIdle) {\n                        clearTimeout($this.remainIdle);\n                    }\n\n                    if ($target.is(\"a[href='#']\") || $target.parent().is(\"a[href='#']\")){\n                        e.preventDefault();\n                    }\n\n                    $this.show();\n                });\n            }\n        },\n\n        show: function(){\n\n            UI.$html.off(\"click.outer.dropdown\");\n\n            if (active && active[0] != this.element[0]) {\n                active.removeClass('uk-open');\n            }\n\n            if (hoverIdle) {\n                clearTimeout(hoverIdle);\n            }\n\n            this.checkDimensions();\n            this.element.addClass('uk-open');\n            this.trigger('show.uk.dropdown', [this]);\n\n            UI.Utils.checkDisplay(this.dropdown, true);\n            active = this.element;\n\n            this.registerOuterClick();\n        },\n\n        hide: function() {\n            this.element.removeClass('uk-open');\n            this.remainIdle = false;\n\n            if (active && active[0] == this.element[0]) active = false;\n        },\n\n        registerOuterClick: function(){\n\n            var $this = this;\n\n            UI.$html.off(\"click.outer.dropdown\");\n\n            setTimeout(function() {\n\n                UI.$html.on(\"click.outer.dropdown\", function(e) {\n\n                    if (hoverIdle) {\n                        clearTimeout(hoverIdle);\n                    }\n\n                    var $target = UI.$(e.target);\n\n                    if (active && active[0] == $this.element[0] && ($target.is(\"a:not(.js-uk-prevent)\") || $target.is(\".uk-dropdown-close\") || !$this.dropdown.find(e.target).length)) {\n                        $this.hide();\n                        UI.$html.off(\"click.outer.dropdown\");\n                    }\n                });\n            }, 10);\n        },\n\n        checkDimensions: function() {\n\n            if (!this.dropdown.length) return;\n\n            if (this.justified && this.justified.length) {\n                this.dropdown.css(\"min-width\", \"\");\n            }\n\n            var $this     = this,\n                dropdown  = this.dropdown.css(\"margin-\" + UI.langdirection, \"\"),\n                offset    = dropdown.show().offset(),\n                width     = dropdown.outerWidth(),\n                boundarywidth  = this.boundary.width(),\n                boundaryoffset = this.boundary.offset() ? this.boundary.offset().left:0;\n\n            // centered dropdown\n            if (this.centered) {\n                dropdown.css(\"margin-\" + UI.langdirection, (parseFloat(width) / 2 - dropdown.parent().width() / 2) * -1);\n                offset = dropdown.offset();\n\n                // reset dropdown\n                if ((width + offset.left) > boundarywidth || offset.left < 0) {\n                    dropdown.css(\"margin-\" + UI.langdirection, \"\");\n                    offset = dropdown.offset();\n                }\n            }\n\n            // justify dropdown\n            if (this.justified && this.justified.length) {\n\n                var jwidth = this.justified.outerWidth();\n\n                dropdown.css(\"min-width\", jwidth);\n\n                if (UI.langdirection == 'right') {\n\n                    var right1   = boundarywidth - (this.justified.offset().left + jwidth),\n                        right2   = boundarywidth - (dropdown.offset().left + dropdown.outerWidth());\n\n                    dropdown.css(\"margin-right\", right1 - right2);\n\n                } else {\n                    dropdown.css(\"margin-left\", this.justified.offset().left - offset.left);\n                }\n\n                offset = dropdown.offset();\n\n            }\n\n            if ((width + (offset.left-boundaryoffset)) > boundarywidth) {\n                dropdown.addClass('uk-dropdown-flip');\n                offset = dropdown.offset();\n            }\n\n            if ((offset.left-boundaryoffset) < 0) {\n\n                dropdown.addClass(\"uk-dropdown-stack\");\n\n                if (dropdown.hasClass('uk-dropdown-flip')) {\n\n                    if (!this.flipped) {\n                        dropdown.removeClass('uk-dropdown-flip');\n                        offset = dropdown.offset();\n                        dropdown.addClass('uk-dropdown-flip');\n                    }\n\n                    setTimeout(function(){\n\n                        if ((dropdown.offset().left-boundaryoffset) < 0 || !$this.flipped && (dropdown.outerWidth() + (offset.left-boundaryoffset)) < boundarywidth) {\n                            dropdown.removeClass('uk-dropdown-flip');\n                        }\n                    }, 0);\n                }\n\n                this.trigger('stack.uk.dropdown', [this]);\n            }\n\n            dropdown.css(\"display\", \"\");\n        }\n\n    });\n\n})(UIkit);\n"],"sourceRoot":"/source/"}