{"version":3,"sources":["core/modal.js"],"names":["UI","setContent","content","modal","jQuery","$","parent","length","persist","data","html","appendTo","element","find","body","active","$html","component","defaults","keyboard","bgclose","minScrollHeight","center","scrollable","transition","init","$this","this","support","paddingdir","langdirection","dialog","on","e","preventDefault","hide","target","options","toggle","isActive","show","removeClass","resize","addClass","height","trigger","Utils","checkDisplay","force","one","end","_hide","bodywidth","width","scrollbarwidth","window","innerWidth","css","updateScrollable","dh","outerHeight","pad","parseInt","innerHeight","top","offset","Math","abs","wh","h","boot","ele","is","modalTrigger","attr","keyCode","$win","debounce","extend","proxy","template","remove","alert","String","join","confirm","onconfirm","isFunction","UIkit"],"mappings":"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","file":"core/modal.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n(function(UI) {\n\n    \"use strict\";\n\n    var active = false, $html = UI.$html, body;\n\n    UI.component('modal', {\n\n        defaults: {\n            keyboard: true,\n            bgclose: true,\n            minScrollHeight: 150,\n            center: false\n        },\n\n        scrollable: false,\n        transition: false,\n\n        init: function() {\n\n            if (!body) body = UI.$('body');\n\n            var $this = this;\n\n            this.transition = UI.support.transition;\n            this.paddingdir = \"padding-\" + (UI.langdirection == 'left' ? \"right\":\"left\");\n            this.dialog     = this.find(\".uk-modal-dialog\");\n\n            this.on(\"click\", \".uk-modal-close\", function(e) {\n                e.preventDefault();\n                $this.hide();\n            }).on(\"click\", function(e) {\n\n                var target = UI.$(e.target);\n\n                if (target[0] == $this.element[0] && $this.options.bgclose) {\n                    $this.hide();\n                }\n            });\n        },\n\n        toggle: function() {\n            return this[this.isActive() ? \"hide\" : \"show\"]();\n        },\n\n        show: function() {\n\n            var $this = this;\n\n            if (this.isActive()) return;\n            if (active) active.hide(true);\n\n            this.element.removeClass(\"uk-open\").show();\n            this.resize();\n\n            active = this;\n            $html.addClass(\"uk-modal-page\").height(); // force browser engine redraw\n\n            this.element.addClass(\"uk-open\").trigger(\"show.uk.modal\");\n\n            UI.Utils.checkDisplay(this.dialog, true);\n\n            return this;\n        },\n\n        hide: function(force) {\n\n            if (!this.isActive()) return;\n\n            if (!force && UI.support.transition) {\n\n                var $this = this;\n\n                this.one(UI.support.transition.end, function() {\n                    $this._hide();\n                }).removeClass(\"uk-open\");\n\n            } else {\n\n                this._hide();\n            }\n\n            return this;\n        },\n\n        resize: function() {\n\n            var bodywidth  = body.width();\n\n            this.scrollbarwidth = window.innerWidth - bodywidth;\n\n            body.css(this.paddingdir, this.scrollbarwidth);\n\n            this.element.css('overflow-y', this.scrollbarwidth ? 'scroll' : 'auto');\n\n            if (!this.updateScrollable() && this.options.center) {\n\n                var dh  = this.dialog.outerHeight(),\n                pad = parseInt(this.dialog.css('margin-top'), 10) + parseInt(this.dialog.css('margin-bottom'), 10);\n\n                if ((dh + pad) < window.innerHeight) {\n                    this.dialog.css({'top': (window.innerHeight/2 - dh/2) - pad });\n                } else {\n                    this.dialog.css({'top': ''});\n                }\n            }\n        },\n\n        updateScrollable: function() {\n\n            // has scrollable?\n            var scrollable = this.dialog.find('.uk-overflow-container:visible:first');\n\n            if (scrollable.length) {\n\n                scrollable.css(\"height\", 0);\n\n                var offset = Math.abs(parseInt(this.dialog.css(\"margin-top\"), 10)),\n                dh     = this.dialog.outerHeight(),\n                wh     = window.innerHeight,\n                h      = wh - 2*(offset < 20 ? 20:offset) - dh;\n\n                scrollable.css(\"height\", h < this.options.minScrollHeight ? \"\":h);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _hide: function() {\n\n            this.element.hide().removeClass(\"uk-open\");\n\n            $html.removeClass(\"uk-modal-page\");\n\n            body.css(this.paddingdir, \"\");\n\n            if(active===this) active = false;\n\n            this.trigger(\"hide.uk.modal\");\n        },\n\n        isActive: function() {\n            return (active == this);\n        }\n\n    });\n\n    UI.component('modalTrigger', {\n\n        boot: function() {\n\n            // init code\n            UI.$html.on(\"click.modal.uikit\", \"[data-uk-modal]\", function(e) {\n\n                var ele = UI.$(this);\n\n                if (ele.is(\"a\")) {\n                    e.preventDefault();\n                }\n\n                if (!ele.data(\"modalTrigger\")) {\n                    var modal = UI.modalTrigger(ele, UI.Utils.options(ele.attr(\"data-uk-modal\")));\n                    modal.show();\n                }\n\n            });\n\n            // close modal on esc button\n            UI.$html.on('keydown.modal.uikit', function (e) {\n\n                if (active && e.keyCode === 27 && active.options.keyboard) { // ESC\n                    e.preventDefault();\n                    active.hide();\n                }\n            });\n\n            UI.$win.on(\"resize orientationchange\", UI.Utils.debounce(function(){\n                if (active) active.resize();\n            }, 150));\n        },\n\n        init: function() {\n\n            var $this = this;\n\n            this.options = UI.$.extend({\n                \"target\": $this.element.is(\"a\") ? $this.element.attr(\"href\") : false\n            }, this.options);\n\n            this.modal = UI.modal(this.options.target, this.options);\n\n            this.on(\"click\", function(e) {\n                e.preventDefault();\n                $this.show();\n            });\n\n            //methods\n            this.proxy(this.modal, \"show hide isActive\");\n        }\n    });\n\n    UI.modal.dialog = function(content, options) {\n\n        var modal = UI.modal(UI.$(UI.modal.dialog.template).appendTo(\"body\"), options);\n\n        modal.on(\"hide.uk.modal\", function(){\n            if (modal.persist) {\n                modal.persist.appendTo(modal.persist.data(\"modalPersistParent\"));\n                modal.persist = false;\n            }\n            modal.element.remove();\n        });\n\n        setContent(content, modal);\n\n        return modal;\n    };\n\n    UI.modal.dialog.template = '<div class=\"uk-modal\"><div class=\"uk-modal-dialog\" style=\"min-height:0;\"></div></div>';\n\n    UI.modal.alert = function(content, options) {\n\n        UI.modal.dialog(([\n            '<div class=\"uk-margin uk-modal-content\">'+String(content)+'</div>',\n            '<div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-primary uk-modal-close\">Ok</button></div>'\n        ]).join(\"\"), UI.$.extend({bgclose:false, keyboard:false}, options)).show();\n    };\n\n    UI.modal.confirm = function(content, onconfirm, options) {\n\n        onconfirm = UI.$.isFunction(onconfirm) ? onconfirm : function(){};\n\n        var modal = UI.modal.dialog(([\n            '<div class=\"uk-margin uk-modal-content\">'+String(content)+'</div>',\n            '<div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-primary js-modal-confirm\">Ok</button> <button class=\"uk-button uk-modal-close\">Cancel</button></div>'\n        ]).join(\"\"), UI.$.extend({bgclose:false, keyboard:false}, options));\n\n        modal.element.find(\".js-modal-confirm\").on(\"click\", function(){\n            onconfirm();\n            modal.hide();\n        });\n\n        modal.show();\n    };\n\n\n    // helper functions\n    function setContent(content, modal){\n\n        if(!modal) return;\n\n        if (typeof content === 'object') {\n\n            // convert DOM object to a jQuery object\n            content = content instanceof jQuery ? content : UI.$(content);\n\n            if(content.parent().length) {\n                modal.persist = content;\n                modal.persist.data(\"modalPersistParent\", content.parent());\n            }\n        }else if (typeof content === 'string' || typeof content === 'number') {\n                // just insert the data as innerHTML\n                content = UI.$('<div></div>').html(content);\n        }else {\n                // unsupported data type!\n                content = UI.$('<div></div>').html('UIkit.modal Error: Unsupported data type: ' + typeof content);\n        }\n\n        content.appendTo(modal.element.find('.uk-modal-dialog'));\n\n        return modal;\n    }\n\n})(UIkit);\n"],"sourceRoot":"/source/"}