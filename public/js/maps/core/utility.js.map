{"version":3,"sources":["core/utility.js"],"names":["UI","stacks","component","defaults","cls","boot","ready","context","$","each","obj","ele","this","data","stackMargin","Utils","options","attr","init","$this","columns","element","children","length","$win","on","fn","process","debounce","$html","is","bind","push","revert","removeClass","iframes","check","forEach","iframe","width","parent","iwidth","ratio","height","Math","floor","css","elements","extend","skip","firstvisible","filter","offset","position","top","outerHeight","column","addClass","UIkit"],"mappings":"CACA,SAAUA,GAEN,YAEA,IAAIC,KAEJD,GAAGE,UAAU,eAETC,UACIC,IAAO,uBAGXC,KAAM,WAGFL,EAAGM,MAAM,SAASC,GAEdP,EAAGQ,EAAE,mBAAoBD,GAASE,KAAK,WAEnC,GAAsBC,GAAlBC,EAAMX,EAAGQ,EAAEI,KAEVD,GAAIE,KAAK,iBACVH,EAAMV,EAAGc,YAAYH,EAAKX,EAAGe,MAAMC,QAAQL,EAAIM,KAAK,0BAMpEC,KAAM,WAEF,GAAIC,GAAQP,IAEZA,MAAKQ,QAAUR,KAAKS,QAAQC,WAEvBV,KAAKQ,QAAQG,SAElBvB,EAAGwB,KAAKC,GAAG,2BAA4B,WAEnC,GAAIC,GAAK,WACLP,EAAMQ,UAQV,OALA3B,GAAGQ,EAAE,WACDkB,IACA1B,EAAGwB,KAAKC,GAAG,OAAQC,KAGhB1B,EAAGe,MAAMa,SAASF,EAAI,QAGjC1B,EAAG6B,MAAMJ,GAAG,iBAAkB,WAC1BN,EAAMC,QAAWD,EAAME,QAAQC,WAC/BH,EAAMQ,YAGVf,KAAKa,GAAG,mBAAoB,WACxBN,EAAMC,QAAUD,EAAME,QAAQC,WAC1BV,KAAKS,QAAQS,GAAG,aAAalB,KAAKe,WACxCI,KAAKnB,OAEPX,EAAO+B,KAAKpB,QAGhBe,QAAS,WAML,MAFA3B,GAAGe,MAAMD,YAAYF,KAAKQ,QAASR,KAAKI,SAEjCJ,MAGXqB,OAAQ,WAEJ,MADArB,MAAKQ,QAAQc,YAAYtB,KAAKI,QAAQZ,KAC/BQ,QAKfZ,EAAGM,MAAM,WAEL,GAAI6B,MAAcC,EAAQ,WAEtBD,EAAQE,QAAQ,SAASC,GAErB,GAAKA,EAAOR,GAAG,YAAf,CAEA,GAAIS,GAASD,EAAOE,SAASD,QACzBE,EAASH,EAAOzB,KAAK,SACrB6B,EAAUH,EAAQE,EAClBE,EAASC,KAAKC,MAAMH,EAAQJ,EAAOzB,KAAK,UAE5CyB,GAAOQ,KAAKH,OAAmBF,EAARF,EAAkBI,EAASL,EAAOzB,KAAK,eAMtE,OAFAb,GAAGwB,KAAKC,GAAG,SAAUzB,EAAGe,MAAMa,SAASQ,EAAO,KAEvC,SAAS7B,GAEZP,EAAGQ,EAAE,6BAA8BD,GAASE,KAAK,WAE7C,GAAI6B,GAAStC,EAAGQ,EAAEI,OAEb0B,EAAOzB,KAAK,eAAiByB,EAAOrB,KAAK,UAAYqB,EAAOrB,KAAK,YAElEqB,EAAOzB,KAAK,QAAcyB,EAAOrB,KAAK,UACtCqB,EAAOzB,KAAK,SAAcyB,EAAOrB,KAAK,WACtCqB,EAAOzB,KAAK,cAAc,GAC1BsB,EAAQH,KAAKM,MAIrBF,SAQRpC,EAAGe,MAAMD,YAAc,SAASiC,EAAU/B,GAEtCA,EAAUhB,EAAGQ,EAAEwC,QACX5C,IAAO,uBACRY,GAEHA,EAAQZ,IAAMY,EAAQZ,IAEtB2C,EAAW/C,EAAGQ,EAAEuC,GAAUb,YAAYlB,EAAQZ,IAE9C,IAAI6C,IAAe,EACfC,EAAeH,EAASI,OAAO,kBAC/BC,EAAeF,EAAa3B,OAAU2B,EAAaG,WAAWC,IAAMJ,EAAaK,cAAiB,GAAI,CAEtGH,MAAW,GAEfL,EAAStC,KAAK,WAEV,GAAI+C,GAASxD,EAAGQ,EAAEI,KAEd4C,GAAO1B,GAAG,cAENmB,EACAO,EAAOC,SAASzC,EAAQZ,KAGpBoD,EAAOH,WAAWC,KAAOF,IACzBH,EAAOO,EAAOC,SAASzC,EAAQZ,WAOpDsD","file":"core/utility.js","sourcesContent":["/*! UIkit 2.17.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n(function(UI) {\n\n    \"use strict\";\n\n    var stacks = [];\n\n    UI.component('stackMargin', {\n\n        defaults: {\n            'cls': 'uk-margin-small-top'\n        },\n\n        boot: function() {\n\n            // init code\n            UI.ready(function(context) {\n\n                UI.$(\"[data-uk-margin]\", context).each(function() {\n\n                    var ele = UI.$(this), obj;\n\n                    if (!ele.data(\"stackMargin\")) {\n                        obj = UI.stackMargin(ele, UI.Utils.options(ele.attr(\"data-uk-margin\")));\n                    }\n                });\n            });\n        },\n\n        init: function() {\n\n            var $this = this;\n\n            this.columns = this.element.children();\n\n            if (!this.columns.length) return;\n\n            UI.$win.on('resize orientationchange', (function() {\n\n                var fn = function() {\n                    $this.process();\n                };\n\n                UI.$(function() {\n                    fn();\n                    UI.$win.on(\"load\", fn);\n                });\n\n                return UI.Utils.debounce(fn, 20);\n            })());\n\n            UI.$html.on(\"changed.uk.dom\", function(e) {\n                $this.columns  = $this.element.children();\n                $this.process();\n            });\n\n            this.on(\"display.uk.check\", function(e) {\n                $this.columns = $this.element.children();\n                if (this.element.is(\":visible\")) this.process();\n            }.bind(this));\n\n            stacks.push(this);\n        },\n\n        process: function() {\n\n            var $this = this;\n\n            UI.Utils.stackMargin(this.columns, this.options);\n\n            return this;\n        },\n\n        revert: function() {\n            this.columns.removeClass(this.options.cls);\n            return this;\n        }\n    });\n\n    // responsive iframes\n    UI.ready((function(){\n\n        var iframes = [], check = function() {\n\n            iframes.forEach(function(iframe){\n\n                if (!iframe.is(':visible')) return;\n\n                var width  = iframe.parent().width(),\n                    iwidth = iframe.data('width'),\n                    ratio  = (width / iwidth),\n                    height = Math.floor(ratio * iframe.data('height'));\n\n                iframe.css({'height': (width < iwidth) ? height : iframe.data('height')});\n            });\n        };\n\n        UI.$win.on('resize', UI.Utils.debounce(check, 15));\n\n        return function(context){\n\n            UI.$('iframe.uk-responsive-width', context).each(function(){\n\n                var iframe = UI.$(this);\n\n                if (!iframe.data('responsive') && iframe.attr('width') && iframe.attr('height')) {\n\n                    iframe.data('width'     , iframe.attr('width'));\n                    iframe.data('height'    , iframe.attr('height'));\n                    iframe.data('responsive', true);\n                    iframes.push(iframe);\n                }\n            });\n\n            check();\n        };\n\n    })());\n\n\n    // helper\n\n    UI.Utils.stackMargin = function(elements, options) {\n\n        options = UI.$.extend({\n            'cls': 'uk-margin-small-top'\n        }, options);\n\n        options.cls = options.cls;\n\n        elements = UI.$(elements).removeClass(options.cls);\n\n        var skip         = false,\n            firstvisible = elements.filter(\":visible:first\"),\n            offset       = firstvisible.length ? (firstvisible.position().top + firstvisible.outerHeight()) - 1 : false; // (-1): weird firefox bug when parent container is display:flex\n\n        if (offset === false) return;\n\n        elements.each(function() {\n\n            var column = UI.$(this);\n\n            if (column.is(\":visible\")) {\n\n                if (skip) {\n                    column.addClass(options.cls);\n                } else {\n\n                    if (column.position().top >= offset) {\n                        skip = column.addClass(options.cls);\n                    }\n                }\n            }\n        });\n    };\n\n})(UIkit);\n"],"sourceRoot":"/source/"}